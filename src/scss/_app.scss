// CONFIG

$color-primary: #e75546;
// $color-primary-light: lighten($color-primary, 13%;);
// $color-primary-dark: darken($color-primary, 13%;);
$color-secondary: #2d3e4e;

$color-primary: #EE5722;
//$color-secondary: #2d3e4e;

$color-gray-dark:   #444;
$color-gray:        #888;
$color-gray-light:  #eee;

$pixels-per-rem: 10; // Kind of global zoom

$fontsize-base: 1.4rem;
//$fontsize-base-print: 1.2rem;
$lineheight-base: 1.5;

$fontsize-big: 	          1.6rem !default;  // 18 px
$fontsize-bigger:         2.0rem !default;  // 20 px
$fontsize-small:          1.4rem !default;  // 14 px
$fontsize-smaller:        1.2rem !default;  // 12 px

$fontsize-h1:  			      5.0rem !default;  // 46 px
$fontsize-h2:  			      3.6rem !default;  // 32 px
$fontsize-h3:  			      2.0rem !default;  // 24 px

$breakpoint: 25cm;	// printed A4

// COMPUTE

// Gutter

$gutter: $fontsize-base * $lineheight-base;
$gutter-in-px: 	round($gutter * $pixels-per-rem / 1rem);

$gutter-half:		$gutter / 2;
$gutter-quarter:	$gutter / 4;
$gutter-double:		$gutter * 2;
$gutter-quad:		$gutter * 4;

// Color palette

$color-secondary-darkest: mix($color-secondary, black, 33.33%);
$color-secondary-darker: mix($color-secondary, black, 50%);
$color-secondary-dark: mix($color-secondary, black, 66.67%);
$color-secondary-light: mix($color-secondary, white, 66.67%);
$color-secondary-lighter: mix($color-secondary, white, 50%);
$color-secondary-lightest: mix($color-secondary, white, 33.33%);



// MIXINS

/// Gives a card depth effect.
/// @param {Number} $depth - depth level (between 1 and 5)
/// @link http://www.google.com/design/spec/layout/layout-principles.html#layout-principles-dimensionality Google Design
/// @requires {function} top-shadow
/// @requires {function} bottom-shadow
@mixin m-shadow($depth) {
  @if $depth < 1 {
    box-shadow: none;
  } @else if $depth > 5 {
    @warn "Invalid $depth `#{$depth}` for mixin `card`.";
  } @else {
    box-shadow: bottom-shadow($depth), top-shadow($depth);
  }
}

// Computes a top-shadow for a card effect.
/// @param {Number} $depth - depth level
/// @return {List}
@function top-shadow($depth) {
  $primary-offset: nth(1.5 3 10 14 19, $depth) * 1px;
  $blur: nth(1.5 3 10 14 19, $depth) * 4px;
  $color: rgba(black, nth(.12 .16 .19 .25 .30, $depth));

  @return 0 $primary-offset $blur $color;
}

/// Computes a bottom-shadow for a card effect.
/// @param {Number} $depth - depth level
/// @return {List}
@function bottom-shadow($depth) {
  $primary-offset: nth(1.5 3 6 10 15, $depth) * 1px;
  $blur: nth(1 3 3 5 6, $depth) * 4px;
  $color: rgba(black, nth(.24 .23 .23 .22 .22, $depth));

  @return 0 $primary-offset $blur $color;
}


// MINI-GRID

.grid {
  display: flex;
  flex-wrap: wrap;
}

.grid--50 > *  {
  flex: 1 0 100%;

  @media (min-width: $breakpoint) {

    flex: 1 0 50%;

    &:nth-child(odd) { padding-right: $gutter-half; }
    &:nth-child(even) { padding-left: $gutter-half; }
  }
}

.cell--full {
  flex: 1 0 100%;
  padding-left: 0;
  padding-right: 0;
}

// BOX MODEL

*, *:before, *:after {
  box-sizing: border-box;
}

// CLEARFIX

.clearfix:before,
.clearfix:after {
  content: "";
  display: table;
}

.clearfix:after {
  clear: both;
}


// PRINT

.print-only {
	display: none;

	@media print {
		display: block;
	}
}


// MAIN STYLES

@import url(https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic,500,100);
// @import url(https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css);

html, body { min-height: 100vh; }
html { font-size: $pixels-per-rem * 1px; }

body {
	font-family: 'Roboto', sans-serif;
	background-color: $color-gray-dark;
	font-size: 1.6rem;
	line-height: $lineheight-base;

	@media (min-width: $breakpoint) {
		padding: $gutter-double 0;
    font-size: $fontsize-base;
	}
}

a {
  $link-color--hover: lighten($color-secondary, 20%);

  color: $color-secondary;
  font-weight: 700;
  text-decoration: none;
  border-bottom: 1px dotted transparent;
  transition: all 0.25s;

  &:hover {
    color: $link-color--hover;
    border-color: $link-color--hover;
  }
}


h1 {
  font-size: $fontsize-h1;
  line-height: 0.9;
  font-weight: 100;
  text-transform: uppercase;
  font-style: italic;
}

h2 {
  font-size: $fontsize-h2;
  line-height: 1.25;
  font-weight: normal;
}

h3 {
  font-size: $fontsize-h3;
  line-height: 1.25;
  font-weight: 400;
  text-transform: uppercase;
  color: $color-gray;
  margin-top: $gutter * 1.25;
}


img { display: block; max-width: 100%; }

ul { padding-left: 0; }

li {
  margin-bottom: $gutter-half;
  list-style-type: none;
}


/* CV */

$aside-width: 29%;

.cv {
  position: relative;
  display: flex;
  flex-direction: column;
  margin: 0 auto;
  background-color: white;

  @media (min-width: $breakpoint) {
    width: 21cm;
		height: 29.7cm;
    overflow: hidden;
    flex-direction: row;
    flex-wrap: wrap;
    @include m-shadow(3);
	}
}

.cv__head {
  background-color: $color-primary;
  color: white;
  text-align: center;
  overflow: hidden;

  @media (min-width: $breakpoint) {
    flex: 1 0 $aside-width;
    @include m-shadow(3);
    z-index: 12;
    display: flex;
    flex-direction: column;
	}
}

.cv__foot {
  background-color: $color-primary;
  color: white;
  text-align: center;
  padding: $gutter;

  @media (min-width: $breakpoint) {
    padding: 0;
    flex: 0 0 (100% - $aside-width);
    margin-left: $aside-width;
    box-shadow: -7cm 0 0 0 $color-gray-light;
    z-index: 12;
	}

  .copyright {
    margin-top: $gutter-half;
  }
}

.cv__main {
  background-color: white;
  color: $color-gray-dark;
	flex: 1;  // sticky footer

  @media (min-width: $breakpoint) {
    flex: 1 0 (100% - $aside-width);
	}

  strong {
    font-weight: 500;
  }
}

.user__name {
  position: absolute;
  top: 0;
  transform: translate3d(0, -50%, 0);
  margin: 0;
  padding: $gutter-quarter $gutter-half;
  padding-right: $gutter-double;
  text-align: left;
  color: white;

  .name__last-name {
    display: inline-block;
    margin-left: - $gutter-quarter * 1.3;  // Fine-tuning
  }

  &:before {
    content: "";
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: -1;
    background-color: $color-secondary;
    transform: skewX(-10deg);  // Font italic angle
    @include m-shadow(2);
  }

  @media (min-width: $breakpoint) {
    font-size: 4rem;
	}
}

.user__job {
  margin-bottom: 0;
  margin-top: 3rem;
  font-weight: 300;
  line-height: 1;

  @media (min-width: $breakpoint) {
    font-size: 3rem;
	}
}


.user__media {

}

.media {}
.media__wrapper {}
.media__image {}

.user__media--hero {
  $dot-size: $gutter-quad;

  position: relative;

  .media {
    max-height: 40rem;
    overflow: hidden;
  }

  @media (min-width: $breakpoint) {

    .media {
      position: relative;
      height: 0;
      padding-bottom: 141.42%;
      max-height: none;
      background-color: white;
    }

    .media__wrapper {
      position: absolute;
      width: 100%;
      top: 0;
      bottom: 0;
      overflow: hidden;
      background-color: $color-secondary;
    }

    .media__image {
      position: absolute;
      top: -10%;
      right: -50%;
      max-width: none;
      max-width: 336%;
    }
  }
}

.user__media--round {

  $media-size: 28rem;

  display: inline-block;
  width: 100%;
  max-width: $media-size;
  padding: $gutter;
  margin: $gutter 0;

  .media {
    position: relative;
    height: 0;
    padding-bottom: 100%;
    border-radius: 50%;
    box-shadow: 0 0 0 $gutter lighten($color-primary, 15%);
  }

  .media__wrapper {
    position: absolute;
    width: 100%;
    top: 0;
    bottom: 0;
    overflow: hidden;
    border-radius: 50%;
    background: $color-secondary;
    z-index: +1;
  }

  .media__image {
    position: absolute;
    top: 0;
    right: 0;
    max-width: none;
    max-width: 160%;
  }
}


.section.user-title {
  position: relative;
  padding-top: $gutter-double;
  padding-bottom: $gutter-double;
}

.user__metas {
  flex: 1;
  background-color: white;
  color: $color-primary;

  h3 {
    font-size: 1.8rem;
    padding: $gutter-quarter;

    &:first-child {
      margin-top: 0;
    }
  }

  > article {
    margin-bottom: $gutter;
  }
}

.socials,
.contact {

  > * {
    display: block;
    min-height: 2.4rem;
    margin-bottom: $gutter-half;
  }
}

.status {
  margin-top: $gutter;
  color: $color-secondary;
  font-weight: 700;
  font-style: italic;
  text-transform: uppercase;
}

.status__age {}
.status__city {}
.status__job {}

.socials {
  margin-bottom: $gutter-half;
}

.social {
  border: none;
  $social-icon-size: 6rem;

  position: relative;
  min-height: $social-icon-size;
  margin-bottom: $gutter;

  display: block;

  &:hover {
  }

  .social__icon {
    display: block;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate3d( -50%, -60%, 0);
    width: $social-icon-size;
    height: $social-icon-size;
    font-size: $social-icon-size;
    line-height: 1;
    text-align: center;
    font-family: "FontAwesome";

    fill: $color-secondary;
  }

  span {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate3d( -50%, -50%, 0);
    padding: $gutter-quarter / 2 $gutter-half;
    background-color: white;
    line-height: 1;
    font-style: italic;
    color: white;

    &:before { // skewed bg
      content: "";
      display: block;
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
      transform: skewX(-10deg);
      background-color: $color-secondary;
      z-index: -1;
    }
  }
}

.contact__phone {
  font-size: $fontsize-big;
  font-style: italic;
}

.adress {
  margin-top: $gutter-half;
  font-style: italic;
  color: $color-gray;
}

.adress__country {
  text-transform: uppercase;
}


/* SECTION */


// Placeholders

%trailing-slashes {

  &:after {
    content: " // ";
  }
}

%headline {
  text-transform: uppercase;
  font-size: $fontsize-big;
  font-weight: 700;
  font-style: italic;
}

%headline--inline {

  &,
  & + * {
    display: inline;
  }
}

%big-strong {
  font-weight: 500;
  font-size: 1.15em;
  line-height: 1;
}


/* Section - general */

.section {
  position: relative;
  padding: $gutter * 1.5 $gutter;
  padding-top: $gutter-double;

  &:first-child {
    padding-top: $gutter * 1.5;
  }
  &:last-child {
    padding-bottom: $gutter-half;
  }
}

/* Section - title */

.section__title {
  position: absolute;
  top: 0;
  left: -$gutter;
  transform: translate3d(0, -50%, 0);
  padding: $gutter-quarter $gutter-half;
  padding-left: $gutter-double;

  color: white;
  margin: 0;
  text-align: center;
  text-transform: uppercase;
  font-size: 2rem;
  font-weight: 300;
  font-style: italic;

  &:before {
    content: "";
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    transform: skewX(-10deg);
    background-color: $color-secondary;
    @include m-shadow(1);
    z-index: -1;
  }
}


/* Section - body */

.section__body {

  article {
    margin-bottom: $gutter-half;
  }

  h3 {
    @extend %headline;
  }

  .section--tasks &,
  .section--tools &,
  .section--profile & {

    h3 {
      @extend %trailing-slashes;
      @extend %headline--inline;
    }
  }

  p + p {
    margin-top: $gutter-half;
  }
}


/* Color variants */

.cv__main {
  background-color: $color-secondary;
}

%bg--white {
  background-color: white;
  color: $color-gray-dark;

  h3 {
    color: $color-primary;
  }
}

%bg--primary {
  background-color: $color-primary;
  color: white;

  h3 {
    color: $color-secondary;
  }
}

%bg--secondary {
  background-color: $color-secondary;
  color:white;

  h3 {
    color: $color-primary;
  }
}

.section--tasks { @extend %bg--secondary; }
.section--tools { @extend %bg--primary; }
.section--timeline { @extend %bg--white; }
.section--profile { @extend %bg--secondary; }


/* TASKS */

.section--tasks {

  article {

    h3 {
      font-size: $fontsize-bigger;
    }
  }
}


/* TIMELINE */

.section--timeline {

  h3 {

    span:nth-child(2) {
      @extend %trailing-slashes;
    }

    span:nth-child(3) {
      color: $color-gray;
    }
  }
}


.timeline {//background-color: gray;
  $timeline-item-size: $fontsize-big;
  $timeline-dot-size: $fontsize-big * 1;
  $timeline-line-size: $timeline-dot-size / 5;

  $timeline-tips-size: $timeline-dot-size;
  $timeline-tree-size: $timeline-dot-size * 2;

  position: relative;
  padding-top: $gutter;
  margin-left: 0;
  padding-left: $timeline-tree-size / 2;
  box-shadow: inset $timeline-line-size / 2 0 0 0 $color-primary,
    - $timeline-line-size / 2 0 0 0 $color-primary;

  .timeline__icon {
    position: absolute;
    left: - ($timeline-dot-size + $timeline-line-size) / 2;
    left: - $timeline-dot-size / 2;
    width: $timeline-tips-size;
    height: $timeline-tips-size;

    fill: $color-primary; // base svg fill
  }

  .timeline__icon--top {
    top: -$timeline-tips-size / 2;
  }

  .timeline__icon--bottom {
    bottom: -$timeline-tips-size/*/ 2*/; // hacky: move it down not the line to show thru
  }

  .timeline__item {
    margin-bottom: $gutter;

    > *:first-child {
      position: relative;
      padding-top: ($timeline-dot-size - $timeline-item-size);  // vert center
      margin-bottom: $gutter-half;
      line-height: 1;
      font-size: $timeline-item-size;

      &:before {
        content: "";
        display: inline-block;
        position: absolute;
        top: 0;
        left: - ($timeline-tree-size + $timeline-dot-size) / 2;
        width: $timeline-dot-size;
        height: $timeline-dot-size;
        background-color: white;
        border-radius: 50%;
        box-shadow: inset 0 0 0 $timeline-line-size $color-primary
      }
    }

    h3 {
      margin-top: 0;
    }
  }

  .date-range {
    display: block;
    font-weight: 700;
    font-style: italic;
    letter-spacing: -0.2rem;
    font-size: $timeline-dot-size;
    line-height: 1;
    color: $color-secondary-lighter;
    margin-top: - ($timeline-dot-size - $timeline-item-size);  // vert center

    @media (min-width: $breakpoint) {
      float: right;
    }
  }

}
